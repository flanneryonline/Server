#!/usr/bin/env bash

set -o errexit
set -o nounset

function extra_datasets {

    local base_jail_dir=${BASE_JAIL_DIR:-${base_jail_dir:-"/usr/jails"}}
    local jail_zfs=${JAIL_ZFS:-${jail_zfs:-"zfast/jails"}}
    local base_port_dir=${BASE_PORT_DIR:-${base_port_dir:-"/usr/ports"}}
    local port_zfs=${PORT_ZFS:-${port_zfs:-"zfast/ports"}}

    zfs create -o mountpoint="${base_port_dir}" "${port_zfs}"
    zfs create -o mountpoint="${base_jail_dir}" "${jail_zfs}"
    zfs create "${jail_zfs}/base"
    zfs create "${jail_zfs}/staging"
    zfs create "${jail_zfs}/thinjails"

    echo "    jail datasets created"
    return 0
}

